<!DOCTYPE html>
<!--
##=========+====================+================================================+
##RD       login.html           |  Robin's modified login form
##RFILE    +====================+=======+===============+======+=================+
##FD   login.html               |   4278|  4/21/23 10:10|    92| u1.03`30421.1010
##FD   login_v1.03`auth.html    |   5075|  4-04-23 10:20|   234| v1-03`30404.1020
##FD   login_v1.03`3013.html    |   5097|  4-04-23 10:21|   234| v1-03`30404.1021
##FD   login_v1.03`api13.html   |   5097|  4-04-23 10:22|   234| v1-03`30404.1022
##FD   login_v1.04`rjs.html     |  13702|  4-28-23  9:00|   234| v1-04`30428.0900
##FD   login_v1.07a.html        |  11937|  4-28-23 18:12|   234| v1-07`30428.1812
##FD   login_v1.07c.html        |  15027|  4-29-23 18:16|   243| v1-07`30429.1816
##FD   login_v1.07c.html        |  15573|  4-30-23 10:14|   254| v1-07`30430.1014
##FD   login_v1.07c.html        |  15931|  5-01-23 10:07|   257| v1-07`30501.1007
##DESC     .--------------------+-------+---------------+------+-----------------+
#           This HTML file ...
##LIC      .--------------------+----------------------------------------------+
#           Copyright (c) 2023 8020Data-formR * Released under
#           MIT License: http://www.opensource.org/licenses/mit-license.php
##FNCS     .--------------------+----------------------------------------------+
#           showPin             |
#           setPIN              |
##CHGS     .--------------------+----------------------------------------------+
# .(30412.02  4/12/23 RAM  6:10p|  Use script module
# .(30412.03  4/12/23 RAM 12:00p|  Move setHTML to top of script (maybe use later)
# .(30415.02  4/15/23 RAM  8:30a|  Avoid CORS error
# .(30421.08  4/21/23 RAM  9:24a|  Wait for onReady
# .(30421.09  4/21/23 RAM 10:10a|  Remove FiveServer option
# .(30425.02  4/25/23 RAM  5:06p|  Add onLoginForm_Submit (not found in module)
# .(30428.01  4/28/23 RAM  9:00a|  Define listener in module
# .(30429.01  4/29/23 RAM  1:00p|  Make showPIN global 
# .(30429.08  4/29/23 RAM  1:52p|  Add <div id="errMsg">
# .(30430.08  4/30/23 RAM 10:06a|  Can't load module script with .mjs
# .(30502.01  5/02/23 RJS 10:07a|  Modify Submit, Cancel buttons  

##SRCE     +====================+===============================================+
#-->
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
<!--    <script src="https://www.w3schools.com/lib/w3.js"></script>-->
        <script src="https://code.jquery.com/jquery-3.6.3.min.js" integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>

        <title>Login_u1.07c-rjs</title>

        <link rel="shortcut icon" href="../assets/icons/favicon.png"><!-- .(30423.01.1 RAM Moved) -->
        <link rel="stylesheet"    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/all.css">

    <!--BEGINNING OF Global STYLE SHEETS (CSS)-->
        <link rel="stylesheet"    href="../css/00_global_variables.css">
        <link rel="stylesheet"    href="../css/01_hamburger.css">
        <link rel="stylesheet"    href="../css/02_header.css">
        <link rel="stylesheet"    href="../css/03_footer.css">
        <link rel="stylesheet"    href="../css/04_index.css">

    <!--RESPONSIVE STYLE SHEETS (CSS)-->
        <link rel="stylesheet"    href="../css/05_resp_GT0950-bigScreen.css">
        <link rel="stylesheet"    href="../css/06_resp_741-950-tabletPortrait.css">
        <link rel="stylesheet"    href="../css/07_resp_440-740-mobileLandscape.css">
        <link rel="stylesheet"    href="../css/08_resp_LT0440-mobilePortrait.css">
        <link rel="stylesheet"    href="../css/09_variables.css">

    <!--BEGINNING OF LOCAL STYLE SHEETS (CSS)-->
        <link rel="stylesheet"    href="login.css">

<!--<script src="../assets/js/header_v1.04.js"></script>--><!-- .(30412.02.6) -->

<!--<script src="../assets/js/login_v1.04.js" ></script>-->
<!--<script              src="login_v1.06d.js"></script>--><!--#.(30421.03.1 RAM Move to module below) -->

    <style>
      #MenuBlank                { display: block; }
      #HomeLink                 { display: block; }
      #HomeLinkLine             { display: block; }
      #MembersLink              { display: none;  }
      #ContactLink a            { color: grey;  }
      #BiosLink a               { color: blue;  }
      #MembersLinkLine          { display: block; }
      #MembersProjectsLink      { display: block; }
      #ProjectDetailsLink a     { color: blue;  }
      #MembersProjectsLinkLine  { display: block; }
      #GuruLink a               { color: grey;  }
      #SupportLink a            { color: grey;  }
      #LicenseLink a            { color: grey;  }
      #MtgLocLinkLine           { display: block; }
      #MtgLocLink a             { color: blue;  }
      #LoginLinkLine            { display: block; }
      #LoginLink                { display: block; }
      #MenuBlank                { display: block; }

    </style>

<script>
            console.log( "login.html[1]  Hello from regular script"  )                  // .(30423.03.2 RAM Add FName[LNo])
</script>

<!-- <script src="/client3/c32_home-wi-mysql-api_v1.03-rjs-ram/assets/mjs/formr_utility-fns_u1.06.mjs" type="module"></script> -->

<script type="module">                                                                  // .(30412.02.7 RAM Use type="module")

// import { fmtMembers, fmtMember } from '../assets/mjs/header.mjs'                     //#.(30412.02.5 RAM Gotta doit all in one script)
// import { setAPI_URL, setHTML   } from '../assets/mjs/formr_utility-fns_u1.06.mjs'    //#.(30412.03.1 RAM).(30415.02.1)
// import { setAPI_URL, setHTML   } from           'mjs/formr_utility-fns_u1.06.mjs'    //#.(30415.02.1 RAM Avoid CORS error with "liveServer.settings.mount:" [ ["/", "/client3/c32_home-wi-mysql-api_v1.03-rjs-ram"] ], )
   import { setAPI_URL, setHTML   } from '../assets/mjs/formr_utility-fns_u1.07.mjs'    // .(30415.02.1 RAM Avoid CORS error).(30423.02.1 RAM New version with fetchFile).(30430.03.1)
// import { fmtLogin              } from '/login.mjs'                                   //#.(30421.03.1 RAM Don't need it yet)
   import { getID, setCookie, clearListCookies }            from './login.mjs'          // .(30421.03.2 RAM Move to module here).(30430.03.2 RAM Must be .js on server)
   import { onLoginForm_Submit, setLoginForm   }            from './login.mjs'          // .(30421.03.3).(30425.02.1 RAM Add onLoginForm_Submit).(30430.03.3)
// import {   handleFormSubmit, sayMsg,  fmtMsg, fmtErr }   from '../assets/mjs/ES6_form_u1.07.mjs' //#.(30428.04.2 Import 'em)

//          sayMsg( 3,   "login.html[2]  Begin module script" )
            console.log( "login.html[2]  Begin module script" )                         // .(30423.03.2 RAM Add FName[LNo])

            setHTML( 'inc-header',   '../includes/inc-header.html'   );                 // .(30412.03.2).(30423.01.2 RAM Maybe Later)
            setHTML( 'inc-section1', '../includes/inc-section1.html' );                 // .(30412.03.2).(30423.01.3)
            setHTML( 'inc-footer',   '../includes/inc-footer.html'   );                 // .(30412.03.2).(30423.01.4)

            await setAPI_URL( )                                                         // .(30412.03.1 RAM Set window.aAPI_URL )
//          window.aAPI_URL = ""                                                        // .(30416.06.1 RAM For now)

//</scr ipt>                                                                            // .(30421.02.1 RAM Keep it all in the same module)
//<script>                                                                              // .(30421.02.2) -->

       var  nID = getID()                                                               // .(30415.03.1)

            clearListCookies( )                                                         // .(30415.03.2)
            setCookie( nID )                                                            // .(30415.03.3)

//       $( document ).ready( ( ) => {                                                  // .(30414.01.1 RAM Wait for document.forms to be rendered)
//          setPIN()
//          setLoginForm( nID )                                                         // .(30329.06.1 RAM Use it).(30425.08.4)
//          } )                                                                         // .(30414.01.2)

         $( document ).ready( onReady )                                                 // .(30414.01.1 RAM Wait for document.forms to be rendered)

//   async  function onReady( ) { ... }                                                 //#.(30421.08.1)
            function onReady( ) {                                                       // .(30421.08.1)
            setPIN()
//   await  setLoginForm( nID )                                                         // .(30329.06.1 RAM Use it).(30421.08.2 RAM Get rid of await).(30425.08.5)
            setLoginForm( nID )                                                         // .(30329.06.1 RAM Use it).(30425.08.6 RAM Was setUserForm)

       var  pLoginForm = document.getElementById(  "LoginForm" );                       // .(30428.01.1)
            pLoginForm.addEventListener("submit", onLoginForm_Submit );                 //#.(30428.01.2 RAM Have to define listener in module).(30428.04.2)
//          pLoginForm.addEventListener("submit",   handleFormSubmit );                 // .(30428.01.2 RAM Have to define listener in module).(30428.04.2)
            }
//--------  ---------------------------------------------------------

  function  showPin() {                                                                 // .(30415.03.4)
       var  x      =  document.getElementById("password");
            x.type = (x.type === "password") ? "text" : "password";
         }; // eof showPIN

     window.showPin = showPin                                                           // .(30429.01.6 RAM Not defined globally unless added to window object)
//--------  ---------------------------------------------------------

  function  setPIN() {                                                                  // .(30415.03.5)
       var  url    =  window.location.href;            // alert("url: " + url);
       var  nPos   =  url.indexOf("?");                // alert("nPos = " + nPos);

          $("#show-pin").css( "display", (nPos >= 0) ? "block" : "none" )
         }; // eof setPIN
//--------  ---------------------------------------------------------

            console.log( "login.html[3]  End module script" )                           // .(30423.03.3)

  </script>

  </head>
  <body data-server-no-reload>                                                        <!-- .(30421.09.1 RAM FiveServer option) -->
<!--<body>                                                                         --><!--#.(30421.09.1) -->

    <div class="container">

  <!-- BEG Header -->
       <!-- inc-header-->
            <div id="inc-header"></div>
  <!--      <script>                                                                    //#.(30412.03.3 Beg)
            // $("#inc-header").load( "../includes/inc-header.html");
               setHTML( 'inc-header', '../includes/inc-header.html' );
            </script> -->                                                             <!--#.(30412.03.3 End) -->
       <!-- END inc-header -->
  <!-- END  Header -->

  <!-- BEG Section 1 -->

    <div class="Section1">
      <div class="logout-temp-div"><br>
        <span class="logout-temp-span"><a href="login.html?id=500">??</a></span>
        <span class="logout-temp-span"><a href="login.html?id=15" >BT</a></span>
        <span class="logout-temp-span"><a href="login.html?id=6"  >KF</a></span>
        <span class="logout-temp-span"><a href="login.html?id=9"  >RM</a></span>
        <span class="logout-temp-span"><a href="login.html?id=90" >RS</a></span>
        <span class="logout-temp-span"><a href="login.html"   >Logout</a></span>
      </div>
      <div class="Section1Title">institute of database developers</div>
      <div class="login">
        <h1>
          Login<br>
<!--      <div id="login-error">sMcduck@gmail.com is not in IODD's database<br>Contact <a href="#">System Administrator</a> for Help</div>--><!--#.(30429.08.1 RAM)-->
          <div id="login-error"><div id="errMsg"></div>Contact <a href="#">System Administrator</a> for Help</div>   <!-- .(30429.08.1 RAM)-->
        </h1>
<!--    <form action="/login"            method="post">                              -->
<!--    <form action="login_v1.06a.html" method="post">                              --><!--#.(30415.08.2 RAM) -->
<!--    <form action="login"             method="post" onsubmit="return onSubmit()"> --><!--#.(30415.02.1 RAM Add onSubmit).(30415.02.x RAM don't submit if false) -->
<!--    <form                            method="post" onsubmit="return onSubmit()"> --><!--#.(30415.02.1 RAM Add onSubmit).(30415.02.1 RAM don't submit if false and action is not set) -->
<!--    <form id="LoginForm"                 onsubmit="return onLoginForm_Submit()"> --><!-- .(30425.02.2).(30425.08.7) -->
        <form id="LoginForm"             >                                              <!-- .(30429.01.6 RAM Not defined globally. Set listener above) -->

          <label class="label-styles" for="username">
            <!-- font awesome icon -->
            <i   class="fas fa-user"></i>
          </label>
          <input type="text"         name="username" placeholder="eMail" id="username" value="" required>

          <label class="label-styles" for="password">
            <i   class="fas fa-lock"></i>
          </label>

          <div>
            <input type="password"   name="password" placeholder="Password" id="password" required >
            <input   id="trigger"    type="checkbox" onclick="showPin()">               <!-- .(30429.01.7 RAM Not defined globally if defined in module) -->
            <label  for="trigger"   class="checker"></label>

            <!--<div class="pin-div"><input id="trigger" class="checkbox-image" type="checkbox" onclick="showPin()"></div>-->
          </div>
          <div   id="login-cancel"><a href="login.html">Cancel</a></div> <!-- .(30501.01.1 RJS Change Cancel btn to a link) -->
     <!-- <input id="login-cancel" type="submit" value="Cancel"> -->     <!--#.(30501.01.1) -->
          <input id="login-button" type="submit" value="Login">          <!-- .(30501.01.2 RJS Add Login btn) -->
        </form>
      </div>
    </div>

  <!-- END Section 1 -->

  <!-- Section 2 -->
  <!-- END Section 2 -->

  <!-- BEG Footer -->
       <!-- inc-footer-->
            <div id="inc-footer"></div>
  <!--      <script>                                                                    //#.(30412.03.5 Beg)
            // $("#inc-footer").load( "../includes/inc-footer.html");
               setHTML( 'inc-footer', '../includes/inc-footer.html');
            </script> -->                                                             <!--#.(30412.03.5 End) -->
       <!-- END inc-footer -->
  <!-- END Footer -->

    <!--<script src="../assets/js/login_v1.04.js"></script>-->

    </div>    <!-- eof Container .*30426.02.1 RAM) -->
<!--</div> --><!-- eof Container --> <!-- // Mismatched close-tag, expected '</body>' but found '</div>'.' -->
  <script>
    console.log( "login.html[4]  End of regular script"  )                              // .(30423.03.4)
  </script>
  </body>
</html>
