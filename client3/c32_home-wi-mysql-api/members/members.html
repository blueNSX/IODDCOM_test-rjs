<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
<!--    <script src="https://www.w3schools.com/lib/w3.js"></script>--><!--#.(30502.02.3 RAM Not needed) -->
        <script src="https://code.jquery.com/jquery-3.6.3.min.js" integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>

        <title>Members</title>
            <link rel="shortcut icon" href="../favicon.png">
            <link rel="stylesheet"    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/all.css">

        <!--BEGINNING OF Global STYLE SHEETS (CSS)-->
            <link rel="stylesheet"    href="../css/00_global_variables.css">
            <link rel="stylesheet"    href="../css/01_hamburger.css">
            <link rel="stylesheet"    href="../css/02_header.css">
            <link rel="stylesheet"    href="../css/03_footer.css">
            <link rel="stylesheet"    href="../css/04_index.css">
        <!--The above needs to be incorporated in the local members.css below 010223-->
        <!--RESPONSIVE STYLE SHEETS (CSS)-->
            <link rel="stylesheet"    href="../css/05_resp_GT0950-bigScreen.css">
            <link rel="stylesheet"    href="../css/06_resp_741-950-tabletPortrait.css">
            <link rel="stylesheet"    href="../css/07_resp_440-740-mobileLandscape.css">
            <link rel="stylesheet"    href="../css/08_resp_LT0440-mobilePortrait.css">
            <link rel="stylesheet"    href="../css/09_variables.css">
        <!--BEGINNING OF LOCAL STYLE SHEETS (CSS)-->
            <link rel="stylesheet"    href="members.css">    
        <script src="../assets/js/members.js"   type="application/javascript" ></script>
        <script src="../assets/js/header.js"></script>
</head>
<body>
<script type="module">

//      var aAPI_URL = "http://localhost:3012"                                          //#.(30412.03.1 RAM Set window.aAPI_URL ).(30505.01.1 RJS Use here).(30507.01.6 RAM Local  aAPI_URL hardcoded).(30507.02.6 RAM aAPI_URL fetched)      
//      var aAPI_URL = "/api13"                                                         //#.(30412.03.1 RAM Set window.aAPI_URL ).(30505.01.1 RJS Use here).(30507.01.6 RAM Remote aAPI_URL hardcoded).(30507.02.6 RAM aAPI_URL fetched)      
//      var aAPI_URL =  await getAPI_URL( )                                             // .(30507.01.7 RAM Remove getAPI_URL for data fetches in members.html).(30507.02.7).(30507.02.41 RAM No workie) 

            setHTML( 'inc-header',   '../includes/inc-header.html' );   
            setHTML( 'inc-section1', '../includes/inc-section1.html' );   
            setHTML( 'inc-footer',   '../includes/inc-footer.html' );   

    //--- fetch members data
   import { setAPI_URL, setHTML } from '../assets/mjs/formr_utility-fns_u1.07.mjs'     // .(30415.02.1 RAM Avoid CORS error).(30430.03.1).(30505.01.1 RJS Import here)(30507.01.5 RAM No Import).(30507.02.5 RAM Use Import)

        //debugger 
            console.log( "members.html[1]       Loading 1st module script" )    

            await setAPI_URL( )                                                         // .(30507.01.7 RAM Remove getAPI_URL for data fetches in members.html).(30507.02.7) 
//          window.aAPI_URL = aAPI_URL                                                  //#.(30412.03.2 RAM Set window.aAPI_URL ).(30505.01.2 RJS Use here).(30507.01.8).(30507.02.8 RAM Done by getAPI_URL)      

            console.log( "members.html[2]       aAPI_URL fetched" )                     // .(30507.02.21)
//          console.log( "members.html[3]       1st Module script loaded" )             // .(30507.01.9)   
//          console.log( `members.html[4]       Loading 2nd module script` )    
//                                                                                      // .(30507.02.31 Beg RAM Move to here)            
//    $(document).ready( function() {                                                   //#.(30507.02.22 Beg RAM Get rid of onReady)

//          console.log( `members.html[5]       onReady. HTML rendered` )      

        var aDB_Server = typeof(aAPI_URL) == 'undefined' ? 'undefined' : aAPI_URL
            console.log( `members.html[6]       Fetching data from: '${aDB_Server}'` )    

        var pMembers = document.getElementById( "Members" )

        fetch( `${aAPI_URL}/members` )                                                  // .(30214.05.3)
           .then( ( res  ) => res.json( ) )
           .then( ( json ) => {  
                    pMembers.innerHTML = fmtMembers( json )  
            console.log( `members.html[7]       Setting members table DIV` )    
            } )
        .catch(( err  ) =>  pMembers.innerHTML = `*** ${err.message}` );                 

            console.log( `members.html[8]       onReady completed` )    
//      });   					       											        /#.(30507.02.22 End)              
            console.log( `members.html[9]       Module script loaded` )                                                                                               
</script>

<div class="container">

<!--  Header -->
    <style>
		#MenuBlank {display:block;}
		#HomeLink {display:block;}
		#HomeLinkLine {display:block;}
		#MembersLink {display:none}
		#ContactLink a {color:grey}
		#BiosLink a {color:blue}
		#MembersLinkLine {display:block}
		#MembersProjectsLink {display:block}
		#ProjectDetailsLink a {color:blue}
		#MembersProjectsLinkLine {display:block}
		#GuruLink a {color:grey}
		#SupportLink a {color:grey}
		#LicenseLink a {color:grey;}
		#MtgLocLinkLine {display:block;}
		#MtgLocLink a {color:blue}
		#LoginLinkLine {display:block;}
		#LoginLink {display:block}
	    #MenuBlank {display:block;}
	</style>

	<!-- inc-header-->
        <div id="inc-header"></div>
    <!-- END inc-header -->

<!-- END  Header -->

<!--  Section1 -->
  		<!-- inc-section1-->
          <div id="inc-section1"></div>
<!-- END inc-section1 -->
<!-- END  Section1 -->


<!--  Section2 -->
<div class="Section2">
    <table class="TableSpacer"><tr><td id="top">&nbsp;</td></tr><tbody></tbody></table>
    <div class="Section2Title">members</div>
    <div class="members-list">
        <table class="main-table">
            <tr class="head-row"><td class="head-name">Name</td><td class="head-email">Email</td><td class="head-phone1">Phone</td><td class="head-phone2">Mobile</td></tr>
            <tbody id="Members">
            </tbody>
            <tr class="last-row" id="bottom"><td colspan="4"><a href="#top" title="Go To The TOP"><img src="../assets/images/ArrowRedTopRedSmall.gif"></a></td></tr>
        </table>
    </div>
</div>
<!-- END  Section2 -->

<!--  Footer -->
  		<!-- inc-footer-->
          <div id="inc-footer"></div>
        <!-- END inc-footer -->
<!-- END  Footer -->

</div> <!--Container ending div-->

<script>
//    w3.includeHTML();   																// #.(30502.02.4)
</script>

</body>
</html>
